---
title: "ğŸ„ğŸ„ğŸ„ day 07  ğŸ„ğŸ„ğŸ„"
output: github_document
---
```{r , include = FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
```

```{r}
library(tidyverse)
library(here)
```

```{r}
bags <- read_lines(here("day_07", "day07.txt")) %>% 
  as_tibble() %>% 
  mutate(value = str_replace_all(value, "bags", "bag")) %>% 
  extract(value, c("outer", "inner"), regex = "(\\w+ \\w+ \\w+) contain (.+)\\.") %>% 
  separate_rows(inner, sep = ", ") %>%
  separate(inner, c("number", "inner"), " ", extra = "merge") %>% 
  filter(number != "no")

bags
```


### Part 1

```{r}
find_outers <- function(inners){
  
  # find bags that can wrap the inners
  # - add in inners with c(inners)
  # - remove duplicates
  
  containing_bags <- bags %>% 
    inner_join(tibble(inner = inners), by = "inner") %>% 
    pull(outer) %>% 
    c(inners) %>% 
    unique()
  
  # if no new ones stop otherwise recurse to find more wrapping bags
  
  if(length(containing_bags) == length(inners)){
    return(inners)
  }else{
    find_outers(containing_bags)
  }
}


# Need to subtract one as method includes oringinal shiny gold bag!

find_outers("shiny gold bag") %>% 
  length() %>% 
  `-`(1)

```

### Part 2

```{r}

```

